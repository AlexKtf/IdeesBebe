#product-show.row
  .ui.segment.product-header
    .ui.right.floated.header.selled-product
      - if @product.selled
        %i.icon.circular.inverted.emphasized.green.checkmark
        = I18n.t('common.product_selled')
      - else
        - if can? :create, @product.reports.build
          - unless current_user.is_owner_of? @product
            = simple_form_for @product.reports.build, url: product_reports_path(@product.slug) do |f|
              = f.button :submit, I18n.t('common.signal')
        - else
          %i.icon.checkmark
          = I18n.t('common.signaled')
    .ui.left.floated.header.product-title
      = @product.name.capitalize
  .ui.grid.stackable
    .ui.nine.wide.column.photo-cont
      #product-carousel
        - unless @product.photos.empty?
          #blueimp-product-carousel.blueimp-gallery.blueimp-gallery-carousel
            .slides
            %h3.title
            %a.prev
              %i.icon.left.arrow
            %a.next 
              %i.icon.right.arrow
            %a.play-pause
            %ol.indicator.thumm-indic
          #links{style: "display:none"}
            - @product.photos.each_with_index do |a|
              %a{href: "#{a.file.url}"}
                %img{src: "#{a.file.url}"}
        - else
          .ui.image.medium
            = image_tag("product_default.png")
      .product-disponibility
        = I18n.t('products.show.avalaible_since')
        = distance_of_time_in_words(DateTime.now.to_i - @product.created_at.to_i)
      .row
        .ui.segment
          .ui.horizontal.fluid.label.product-label
            Prix
          %p.product-price
            = @product.price
            %i.icon.euro
          .ui.horizontal.fluid.label.product-label
            = I18n.t('common.description')
          %p.product-desc
            = @product.description
    .ui.seven.wide.column
      .ui.segment
        .ui.label.attached.top.seller-info
          A propos du vendeur
        .ui.list
          .item#owner
            .ui.image.small
              = image_tag @product.owner.avatar
            .content
              .header
                = @product.owner.username
              %i.icon.map.marker
              Paris
        .responsetime
          - response_time = @product.owner.response_time
          - satisfaction = @product.owner.satisfaction_rating
          .ui.horizontal.label
            %b= I18n.t('products.show.average_response_time')
            .ui.horizontal.purple.label 
              - if response_time.zero?
                Indéfini
              - else
                = distance_of_time_in_words(response_time)
        .responsetime
          .ui.horizontal.label
            %b Taux de satisfaction sur les vente:
            .ui.horizontal.purple.label 
              - if satisfaction.nil?
                Indéfini
              - else
                = number_to_percentage(satisfaction, precision: 0)
          .row.responsetime
            - if user_signed_in?
              = render current_user.is_owner_of?(@product) ? 'form_message_seller' : 'form_message_buyer'
              - if can? :edit, @product
                = link_to edit_product_path(@product.slug), class: "ui submit fluid labeled icon button" do  
                  %i.icon.edit
                  = I18n.t('common.edit')
            - else
              .row
                .ui.message.purple
                  Connectez-vous pour contacter le vendeur

  - if can? :create, @comment
    = render 'form_comments'


= render 'comments'